{{ define "dashtables" }}
	{{ template "tablehelper" . }}
	<table class="display table compact dataTable">
		<thead>
			<tr>
			{{ if eq .Page "images" }}
				{{ template "imageheaders" }}
			{{ else if eq .Page "instances" }}
				{{ template "instheaders" }}
			{{ end }}
			</tr>
		</thead>

		<tbody id="selectable">
			{{ if eq .Page "images" }}
				{{ template "imagedata" . }}
			{{ else if eq .Page "instances" }}
				{{ template "instdata" . }}
			{{ end }}
		</tbody>
	</table>
{{ end }}
{{ define "tablehelper" }}
	<div id="actions" style="display: none">
		<div class="btn-group">
			<button type="button" class="btn btn-primary">Action</button>
			<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
				<span class="caret"></span>
				<span class="sr-only">Toggle Dropdown</span>
			</button>
			<ul class="dropdown-menu" role="menu">
				{{ if eq .Page "images" }}
					{{ template "imagemenu" }}
				{{ else if eq .Page "instances" }}
					{{ template "instmenu" }}
				{{ end }}
			</ul>
		</div>
	</div>
	<script>
	window.jqReady.push(function() {
		selections = {};
		var table = $('.dataTable').dataTable({
			//paging: false,
			"dom": '<"row"<"col-md-6"l><"col-md-4"f><"col-md-2"<"topbar">>><"row"r><"row"t><"row"<"col-md-2"<"botbar">><"col-md-4"i><"col-md-6"p>>',
		} );

		var btn = $( "#actions" );

		$("div.topbar").html(btn[0].innerHTML);

		var bot = $("div.botbar").html(btn[0].innerHTML);

		$("div.botbar div").addClass("dropup");

		$('.dataTable tbody').on( 'click', 'tr', function () {
			if($(this).hasClass('selected')) {
				delete(selections[this.id]);
			} else {
				selections[this.id] = true;
			}
			$(this).toggleClass('selected');
		} );
	});
	</script>
{{ end }}
